---
title: 9009_namespace
format:
  html:
    embed-resources: true
execute:
  enabled: true
--- 
 ##  Namespaces
 ##  Collect examples here
 
\footnotesize

#
##-------------------------------------
## NAMESPACES - See Ch 7.4.3
##-------------------------------------


## HELP
```{r}
apropos("environment")
apropos("namespace")
```

### all installed packages
```{r}
installed.packages()
installed.packages() |> class()
ls()
```

## all attached packages vs search()
```{r}
(.packages()) #22
search()  #24
z=paste0("package:", .packages())

z %in% search()
search()[!z %in% search()]

search()[!z %in% search()]
base::setdiff(z, search())
```

### getAnywhere (examine all loaded NS)
```{r}
?getAnywhere
argsAnywhere(derive_params)
getAnywhere(filter)
getAnywhere(ae)

# fct in pkg admiral
getAnywhere("count_vals")
getAnywhere(count_vals)

argsAnywhere(derive_params)
getAnywhere(filter)
getAnywhere(ae)

# fct in pkg admiral
getAnywhere("count_vals")
getAnywhere(count_vals)

```

## getNamespace, returns environment
```{r}
?help.start
library(pkgload)
getNamespace("admiral")   # Loads NS for admiral
isNamespaceLoaded("admiral")
unloadNamespace("admiral")
```
### objects in NameSpace
```{r} 
ls(getNamespace("dplyr"))

## Need better way ...
ls(getNamespace("admiral")) == "count_vals"  # T
getAnywhere("count_vals")

```
### test, is object in ns?
```{r}
z=ls(getNamespace("admiral"))

c("slice_derivation") %in% z   # TRUE
```

### Find data(), class packageIRQ
```{r}
# returns obj of class packageIRQ
data() |> class()

# data in one package
data(package = "tidyr")

# data in one package (not loaded)
isNamespaceLoaded("broom")  # F
data(package = "broom")
isNamespaceLoaded("broom") # F
```

### Find all 'loaded' ds?   means ...?
```{r}
```


### ds in pkg
```{r}
data()   # all loaded ds
data(package = "admiral")  # ds in package admiral; will NOT load NS admiral
ls(getNamespace("admiral"))   # will load NS admiral


isNamespaceLoaded("admiral")
unloadNamespace("admiral")
data("admiral_adsl")   # not found
data("ae")  # not found
ls(getNamespace("pharmaversesdtm"))
